# AI 추천 과정 기능 사용 가이드

앤보임 플래너 프로의 AI 기반 학습 과정 추천 시스템 사용 가이드입니다.

## 📋 목차

1. [기능 개요](#기능-개요)
2. [API 키 설정](#api-키-설정)
3. [레벨테스트 결과표 업로드](#레벨테스트-결과표-업로드)
4. [학습 목표 설정](#학습-목표-설정)
5. [AI 추천 생성](#ai-추천-생성)
6. [문제 해결](#문제-해결)

---

## 기능 개요

### 왜 이 기능이 필요한가?

앤보임 플랫폼의 기존 레벨테스트는 **레벨별로 동일한 추천**을 제공합니다. 하지만 플래너 프로의 AI 추천 시스템은:

- ✅ 레벨테스트 결과표를 AI가 상세 분석
- ✅ 학생의 **개인별 목표**를 반영
- ✅ 과거 학습 이력을 고려
- ✅ **맞춤형 과정 추천** 생성

### 차별화 포인트

| 구분 | 앤보임 기본 추천 | 플래너 프로 AI 추천 |
|------|-----------------|-------------------|
| 분석 기준 | 레벨만 고려 | 레벨 + 목표 + 이력 + 상세 점수 |
| 추천 방식 | 레벨별 일괄 | 학생별 맞춤형 |
| 강점/약점 분석 | ❌ | ✅ (AI 분석) |
| 학습 방향 제안 | ❌ | ✅ (AI 기반) |

---

## API 키 설정

AI 추천 기능을 사용하려면 먼저 OpenAI API 키를 설정해야 합니다.

### 1. OpenAI API 키 발급

1. [OpenAI Platform](https://platform.openai.com/api-keys)에 접속
2. 로그인 또는 회원가입
3. **"Create new secret key"** 버튼 클릭
4. 생성된 키를 **안전한 곳에 복사** (한 번만 표시됨)

### 2. 플래너 프로에 API 키 등록

1. 사이드바에서 **"설정" > "API 키"** 메뉴 클릭
2. **"새 API 키 추가"** 버튼 클릭
3. 다음 정보 입력:
   - **API 제공자**: OpenAI 선택
   - **키 이름**: 예) "내 OpenAI 키"
   - **API 키**: 발급받은 키 붙여넣기
4. **"저장"** 버튼 클릭

### 3. 보안 정보

- ✅ API 키는 **AES-256-GCM 암호화**되어 저장됨
- ✅ **플래너별로 격리**되어 다른 사용자가 접근 불가
- ✅ 환경변수로 암호화 키 관리
- ⚠️ API 키는 절대 공유하지 마세요

---

## 레벨테스트 결과표 업로드

### 1. 학생 상세 페이지 접속

1. **"학생 관리"** 메뉴에서 학생 선택
2. **"기본 정보"** 탭 클릭
3. 우측 상단 **"수정"** 버튼 클릭

### 2. 레벨테스트 이미지 업로드

**레벨테스트 정보** 섹션에서:

1. **"레벨테스트 결과표 이미지"** 업로드 버튼 클릭
2. 앤보임 레벨테스트 결과표 이미지 파일 선택
3. 업로드 완료 후 이미지 확인
4. **테스트 날짜**는 자동으로 오늘 날짜로 설정됨 (수정 가능)

### 3. 지원 형식

- ✅ JPG, PNG, JPEG
- ✅ 최대 20MB
- ⚠️ 선명한 이미지 권장 (AI 분석 정확도 향상)

---

## 학습 목표 설정

### 학습 목표 섹션

**"기본 정보"** 탭의 **"학습 목표"** 섹션에서 입력:

#### 1. 목표 카테고리 선택

다음 중 하나를 선택:
- 토익스피킹
- 해외여행
- 일상영어
- 워킹홀리데이
- 비즈니스영어
- 유학준비
- 기타

#### 2. 목표 달성 희망 날짜

학생이 목표를 달성하고 싶어하는 날짜를 선택합니다.

예) 2026년 12월 31일

#### 3. 목표 상세 설명

학생의 구체적인 목표를 자세히 작성합니다.

**예시**:
```
6개월 후 토익스피킹 Level 6 달성
해외 비즈니스 미팅에서 자신있게 대응할 수 있는 능력 향상
프레젠테이션 영어 실력 강화
```

### 4. 저장

모든 정보 입력 후 우측 상단 **"저장"** 버튼 클릭

---

## AI 추천 생성

### 1. 학습 기록 탭 이동

1. 학생 상세 페이지에서 **"학습 기록"** 탭 클릭
2. 상단에 **"AI 추천 과정"** 섹션 확인

### 2. AI 추천 생성 버튼 클릭

**"AI 추천 생성"** 버튼을 클릭하면:

1. ⏳ 레벨테스트 이미지 AI 분석 (GPT-4o Vision)
2. ⏳ 학생 목표 + 학습 이력 종합 분석
3. ⏳ 맞춤형 과정 추천 생성
4. ✅ 추천 결과 표시

**예상 소요 시간**: 10-30초

### 3. 추천 결과 확인

#### 추천 과정 카드 (3개)

각 카드에 표시되는 정보:
- **우선순위**: 1순위, 2순위, 3순위
- **과정명**: AI가 추천하는 과정 이름
- **카테고리**: 과정의 분류 (비즈니스, 회화, 시험준비 등)
- **레벨**: 추천 과정의 난이도
- **기간**: 예상 학습 기간
- **매칭률**: 학생과의 적합도 (%)
- **추천 이유**: AI가 분석한 추천 근거

#### AI 분석 인사이트

추천 카드 하단에 표시:

**강점** (초록색 카드)
- AI가 분석한 학생의 강점 3가지
- 예) 회화 실력, 발음, 실전 응용력

**개선 영역** (노란색 카드)
- AI가 파악한 보완이 필요한 영역 3가지
- 예) 비즈니스 용어, 고급 문법, 독해력

**학습 방향** (파란색 카드)
- AI가 제안하는 전반적인 학습 방향
- 예) "실무 중심 비즈니스 영어에 집중하되, 문법 기초를 병행 학습"

### 4. 과정 추가

각 추천 카드의 **"과정 추가"** 버튼을 클릭하면 해당 과정이 학생의 수강 과정으로 추가됩니다.

---

## 문제 해결

### ⚠️ "API 키가 설정되지 않았습니다" 오류

**원인**: OpenAI API 키가 등록되지 않았거나 비활성화됨

**해결방법**:
1. 설정 > API 키 메뉴 이동
2. OpenAI API 키 등록 확인
3. 키가 **"활성화"** 상태인지 확인

### ⚠️ "레벨테스트 결과표를 업로드해주세요" 경고

**원인**: 레벨테스트 이미지가 업로드되지 않음

**해결방법**:
1. 기본 정보 탭 이동
2. 레벨테스트 정보 섹션에서 이미지 업로드
3. 저장 후 다시 시도

### ⚠️ "AI 분석 중 오류가 발생했습니다" 오류

**가능한 원인**:
- OpenAI API 사용량 초과
- 이미지 분석 실패
- 네트워크 오류

**해결방법**:
1. OpenAI 계정의 사용량 및 결제 정보 확인
2. 이미지가 선명하고 올바른 형식인지 확인
3. 몇 분 후 다시 시도

### 💡 추천 품질 개선 팁

#### 1. 레벨테스트 이미지
- ✅ 선명하고 고해상도 이미지 사용
- ✅ 결과표 전체가 보이도록 촬영
- ✅ 그래프와 점수가 명확하게 보이는지 확인

#### 2. 학습 목표
- ✅ 구체적으로 작성 (예: "토익스피킹 Level 6 달성")
- ✅ 기간 명시 (예: "6개월 후")
- ✅ 학생의 실제 니즈 반영

#### 3. 과거 학습 이력
- ✅ 완료한 과정을 정확하게 기록
- ✅ 각 과정의 성취도를 메모에 작성
- ✅ 학생의 강점/약점을 플래너 메모에 기록

---

## 💰 비용 정보

### OpenAI API 사용 비용

**AI 추천 1회 생성당 예상 비용**:
- Vision API (이미지 분석): 약 1000 토큰 = $0.01
- GPT-4o (추천 생성): 약 1500-2000 토큰 = $0.02-0.03
- **총 비용**: 약 $0.03-0.05 (약 40-65원)

### 비용 절감 팁

- ✅ 레벨테스트 결과가 변경되지 않았다면 재생성 불필요
- ✅ 목표가 크게 바뀌지 않았다면 기존 추천 활용
- ✅ 여러 학생의 추천을 한 번에 생성하지 말고 필요할 때만 생성

---

## 🔒 보안 및 개인정보

### 데이터 처리

- ✅ 레벨테스트 이미지: Supabase Storage에 암호화 저장
- ✅ 학생 정보: RLS(Row Level Security)로 플래너별 격리
- ✅ API 키: AES-256-GCM 암호화
- ✅ AI 분석 결과: 플래너 계정에만 저장

### OpenAI 데이터 정책

OpenAI는 API를 통해 전송된 데이터를:
- ❌ 모델 훈련에 사용하지 **않습니다**
- ❌ 다른 사용자와 공유하지 **않습니다**
- ✅ 30일 후 자동 삭제됩니다

자세한 내용: [OpenAI API Data Usage Policies](https://openai.com/policies/api-data-usage-policies)

---

## 📞 지원

문의사항이나 문제가 있으신 경우:
- 📧 이메일: support@nbvoim-planner.com
- 📱 카카오톡: @앤보임플래너프로

---

**최종 업데이트**: 2026년 2월 10일
