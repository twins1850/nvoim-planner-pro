# ================================================
# 앤보임 영어회화 관리 시스템 - 환경 변수 설정
# ================================================
# 이 파일은 예시 파일입니다. 실제 사용 시:
# 1. 이 파일을 .env로 복사
# 2. 실제 값으로 교체
# 3. .env는 절대 Git에 커밋하지 않음
# ================================================

# ====================
# 서버 설정
# ====================
NODE_ENV=development
PORT=3000
API_VERSION=v1

# ====================
# 데이터베이스 설정
# ====================
# MongoDB Atlas 연결 문자열
# 형식: mongodb+srv://username:password@cluster.mongodb.net/database?retryWrites=true&w=majority
MONGODB_URI=mongodb+srv://YOUR_USERNAME:YOUR_PASSWORD@YOUR_CLUSTER.mongodb.net/english-conversation?retryWrites=true&w=majority
MONGODB_MAX_POOL_SIZE=10
MONGODB_MIN_POOL_SIZE=2

# ====================
# Redis 캐시 설정
# ====================
# 개발: redis://localhost:6379
# 프로덕션: AWS ElastiCache 엔드포인트 사용
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_TTL_SECONDS=3600

# ====================
# JWT 인증 설정
# ====================
# 강력한 시크릿 생성 방법:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=GENERATE_STRONG_SECRET_DO_NOT_USE_THIS_DEFAULT
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=GENERATE_ANOTHER_STRONG_SECRET_DO_NOT_USE_THIS_DEFAULT
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=nvoim-api
JWT_AUDIENCE=nvoim-client

# ====================
# AWS 설정
# ====================
# IAM 사용자 자격 증명 (프로덕션에서는 IAM Role 사용 권장)
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_ACCESS_KEY
AWS_REGION=ap-northeast-2
AWS_S3_BUCKET_NAME=english-conversation-files
AWS_S3_ENDPOINT=https://s3.ap-northeast-2.amazonaws.com
AWS_ACCOUNT_ID=YOUR_AWS_ACCOUNT_ID

# ====================
# Azure Speech Service
# ====================
AZURE_SPEECH_KEY=YOUR_AZURE_SPEECH_SERVICE_KEY
AZURE_SPEECH_REGION=koreacentral
AZURE_SPEECH_ENDPOINT=https://koreacentral.api.cognitive.microsoft.com/

# ====================
# OpenAI API 설정
# ====================
OPENAI_API_KEY=sk-YOUR_OPENAI_API_KEY
OPENAI_MODEL=gpt-4o
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.7
OPENAI_ORG_ID=

# ====================
# Firebase 푸시 알림
# ====================
# Firebase Console > 프로젝트 설정 > 서비스 계정에서 다운로드
FIREBASE_PROJECT_ID=YOUR_FIREBASE_PROJECT_ID
FIREBASE_PRIVATE_KEY_ID=YOUR_FIREBASE_PRIVATE_KEY_ID
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_FIREBASE_PRIVATE_KEY\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=YOUR_FIREBASE_CLIENT_EMAIL
FIREBASE_CLIENT_ID=YOUR_FIREBASE_CLIENT_ID
FIREBASE_AUTH_URI=https://accounts.google.com/o/oauth2/auth
FIREBASE_TOKEN_URI=https://oauth2.googleapis.com/token
FIREBASE_AUTH_PROVIDER_CERT_URL=https://www.googleapis.com/oauth2/v1/certs

# ====================
# 파일 업로드 설정
# ====================
MAX_FILE_SIZE_MB=100
ALLOWED_FILE_TYPES=mp4,avi,mov,mp3,wav,m4a,webm,mkv
UPLOAD_TEMP_DIR=./uploads/temp
UPLOAD_FINAL_DIR=./uploads/final

# ====================
# 비용 관리
# ====================
MONTHLY_BUDGET_LIMIT=100000
COST_ALERT_THRESHOLD=80
COST_ALERT_EMAIL=admin@nvoim.com
DAILY_API_CALL_LIMIT=10000

# ====================
# 보안 설정
# ====================
# CORS 허용 도메인 (쉼표로 구분)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8081
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=900000
BCRYPT_SALT_ROUNDS=12
SESSION_SECRET=GENERATE_SESSION_SECRET_DO_NOT_USE_THIS_DEFAULT

# ====================
# 로깅 및 모니터링
# ====================
LOG_LEVEL=info
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=30
SENTRY_DSN=YOUR_SENTRY_DSN
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# ====================
# 이메일 설정 (선택)
# ====================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=YOUR_EMAIL@gmail.com
SMTP_PASS=YOUR_APP_PASSWORD
EMAIL_FROM="앤보임 시스템 <noreply@nvoim.com>"

# ====================
# 백업 설정
# ====================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=english-conversation-backups

# ====================
# 성능 설정
# ====================
WORKER_THREADS=4
MAX_CONCURRENT_JOBS=10
JOB_TIMEOUT_MS=300000
CACHE_ENABLED=true

# ====================
# 개발 환경 전용
# ====================
DEBUG=false
MOCK_EXTERNAL_APIS=false
DISABLE_AUTH=false

# ================================================
# 환경별 설정 가이드
# ================================================
# 개발 환경 (development):
# - 로컬 MongoDB/Redis 사용
# - DEBUG=true
# - MOCK_EXTERNAL_APIS=true (API 비용 절감)
#
# 스테이징 환경 (staging):
# - 클라우드 서비스 사용
# - 실제 API 키 사용 (제한된 할당량)
# - LOG_LEVEL=debug
#
# 프로덕션 환경 (production):
# - AWS Secrets Manager/Azure Key Vault 사용
# - IAM Role 기반 인증
# - LOG_LEVEL=warn
# - SENTRY 활성화
# ================================================